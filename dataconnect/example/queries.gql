mutation CreateNewUser($displayName: String!, $email: String, $photoUrl: String) @auth(level: USER_ANON) {
  user_insert(data: {displayName: $displayName, email: $email, photoUrl: $photoUrl, createdAt_expr: "request.time"})
}

query GetPublicLists @auth(level: PUBLIC) {
  lists(where: {public: {eq: true}}) {
    id
    name
    description
    user {
      id
      displayName
    }
  }
}

mutation AddMovieToList($listId: UUID!, $movieId: UUID!, $note: String, $position: Int!) @auth(level: USER) {
  listMovie_insert(data: {listId: $listId, movieId: $movieId, note: $note, position: $position})
}

query GetMoviesFromList($listId: UUID!) @auth(level: USER) {
  list(id: $listId) {
    name
    movies_via_ListMovie {
      id
      title
      year
      summary
    }
  }
}